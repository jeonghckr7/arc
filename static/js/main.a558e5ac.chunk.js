(this.webpackJsonparc=this.webpackJsonparc||[]).push([[0],{189:function(e,t,n){e.exports=n(437)},194:function(e,t,n){},239:function(e,t){},253:function(e,t){},255:function(e,t){},437:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),l=n(183),c=n.n(l),r=n(15),i=(n(194),n(18)),s=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"\ud648"),a.a.createElement("p",null,"\uc774\uacf3\uc740 \ud648\uc774\uc5d0\uc694. \uac00\uc7a5 \uba3c\uc800 \ubcf4\uc5ec\uc9c0\ub294 \ud398\uc774\uc9c0\uc8e0."))},d=(n(188),n(68)),u={1:{name:"\uae40\ubbfc\uc900",description:"Frontend Engineer @ Laftel Inc. \uc7ac\ubc0c\ub294 \uac83\ub9cc \uace8\ub77c\uc11c \ud558\ub294 \uac1c\ubc1c\uc790"},2:{name:"\ud64d\uae38\ub3d9",description:"\uc804\ub798\ub3d9\ud654\uc758 \uc8fc\uc778\uacf5"}},m=function(e){var t=e.match.params.no,n=u[t];return n?a.a.createElement("div",null,a.a.createElement("h3",null,t,"(",n.name,")"),a.a.createElement("p",null,n.description)):a.a.createElement("div",null,"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc720\uc800\uc785\ub2c8\ub2e4.")},p=n(184),h=n.n(p),g=(n(195),n(197),n(438),h.a.initializeApp({apiKey:"AIzaSyBLHYeag273-F8L_funDb_8iUZO7BGZZW8",authDomain:"chat-app-55e32.firebaseapp.com",databaseURL:"https://chat-app-55e32.firebaseio.com",projectId:"chat-app-55e32",storageBucket:"chat-app-55e32.appspot.com",messagingSenderId:"485337347226",appId:"1:485337347226:web:04974d75cec0bcef055b23",measurementId:"G-E3QSED8X11"})),f=(g.database(),g.firestore()),v=g.storage(),E=n(66),b=n.n(E),w=n(105),_=n.n(w),y=n(67),x=n.n(y),k=n(185),S=n.n(k);function I(e,t,n){var o=f.collection("board").doc(e).collection("data");return b.a.get("https://cors-anywhere.herokuapp.com/https://gall.dcinside.com/board/view/?id="+e+"&no="+t+"&exception_mode=recommend").then((function(e){var t=e.data,a=/<div style="overflow[\s\S]*?([^<]+?)\ubcf8\ubb38 \uc6b0\uce21/i.exec(t);a=(a=a[0].replace('<div style="overflow:hidden;">',"")).replace("\ubcf8\ubb38 \uc6b0\uce21","");for(var l,c=/<div style="overflow[\s\S]*?([^<]+?)\ubcf8\ubb38 \uc6b0\uce21 \uad11\uace0/i.exec(t),r=/(<video autoplay loop muted onmousedown="mp4_overlay\(this, 'https:\/\/dcimg(.*?)'|<img src="https:\/\/dcimg(.*?)")/g,i=[];null!==(l=r.exec(c));)console.log("imgrepl"),console.table(l),i.push(l[0]);console.table(i);for(var s,u=/\uc6d0\ubcf8[\s\S]*?([^<]+?)<\/div>/i.exec(t),m=/<li><a href="[^>]*>([^<]*)<\/a>/g,p=[];null!==(s=m.exec(u));){var h=s[1].split(".")[0];p.push(h),console.log("imgorgsor"+h)}var g=_.a.load(t),f=g("meta[property='og:image']").attr("content").split("&");console.log("array "+f[0]);for(var E,w=g("span.title_subject").text(),y=g("span.nickname").eq(0).text(),x=[],k=/<a href="https:\/\/image.dcinside\S+"/g,S=0;null!==(E=k.exec(u));){var I=E[0].split('"'),j=(I=I[1]).split("?"),D=f[0]+"&"+j[1];console.log("opimage_array "+f[0]+"imgsrcsr->"+j[1]),console.log("imgsrcsr "+D),x.push({rep:i[S],imgs:I,imgscr:D,ogsname:p[S]}),S++}console.table(x);var B=x.map((function(e){return function(e){return new Promise((function(t,n){console.table(e),b.a.get("https://cors-anywhere.herokuapp.com/http://3.208.68.247/flask?url="+encodeURIComponent(e.imgscr),{method:"GET",responseType:"blob",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",headers:{"Access-Control-Allow-Headers":"x-requested-with, x-requested-by","User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.162 Safari/537.36"}}).then((function(n){var o=n.headers["content-disposition"],a=n.headers["content-length"];if(o){var l=o.split(";").filter((function(e){return e.includes("filename")})),c=Object(d.a)(l,1)[0];if(c){var r=c.split("=");r=r[1].split("."),r=e.ogsname+"_"+a+"."+r[1],console.log("contentLength: "+a+" splitfilename: "+r);var i=v.ref("").child(r);i.getDownloadURL().then((function(n){t({resrep:e.rep,resimgsrcs:e.imgs,getdurl:n})})).catch((function(o){if(console.log(o.code),"storage/object-not-found"===o.code){console.log("\ud30c\uc77c\uc774 \uc5c6\ub124\uc694?"+o.code);var a=i.put(n.data);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log(t+"% done")}),(function(e){console.table(e)}),(function(){a.snapshot.ref.getDownloadURL().then((function(n){console.log("\ud30c\uc77c\uc744 \ub2e4\uc6b4 \ubc1b\uc558\ub124\uc694?"+n),t({resrep:e.rep,resimgsrcs:e.imgs,getdurl:n})}))}))}}))}}}))}))}(e)}));Promise.all(B).then((function(e){e.forEach((function(e){console.table(e),a=(a=a.replace(e.resrep,"<img src="+e.getdurl+">"+e.resrep)).replace(e.resimgsrcs,"")}));var t={wr_subject:w,mb_id:y,wr_content:a,wr_datetime:Date.now(),uid:n};o.doc(n).update(t).then((function(){console.log("updated id!: "+n)}))}))})).catch((function(e){e.response&&(console.error("404 \uc5d0\ub7ec\ub0d0? "+e.response.status),o.doc(n).remove().then((function(){console.log("remove id-> "+n)})))})),a.a.createElement("div",null)}function j(e){var t=e.id;console.log("IdBoard boardid: "+t);var n=f.collection("board").doc(t).collection("data");var l=f.collection("boarddc");l.orderBy("datetime","desc").limit(1).get().then((function(e){e.empty?l.add({gall_id:t,datetime:Date.now()}):e.forEach((function(e){console.log(e.id,"=>",e.data());var o=e.data(),a=x()().diff(o.datetime,"seconds");console.log(a+" \ucd08\uac00 \uc9c0\ub0ac\uc2b5\ub2c8\ub2e4."),a>1&&l.add({gall_id:t,datetime:Date.now()}).then((function(o){console.log("conn newPost id: "+o.id),l.doc(e.id).delete().then((function(){console.log("delete id-> "+e.id),b.a.get("https://cors-anywhere.herokuapp.com/https://gall.dcinside.com/board/lists/?id="+t+"&exception_mode=recommend").then((function(e){console.log("axios");var o=e.data,a=_.a.load(o),l=0;a("table.gall_list").find("tr.us-post").each((function(e,o){var c=a(o).children("td.gall_num").text().trim();n.where("wr_1","==",c).limit(1).get().then((function(e){if(console.log(t+" "+c),e.empty){if(l>0)return;l++,console.log("conteach: "+l),n.add({gall_id:t,wr_1:c,wr_2:Date.now(),wr_datetime:"",wr_subject:"",mb_id:"",wr_content:"",uid:""}).then((function(e){console.log("snap.data() new id: "+e.id),I(t,c,e.id)})).catch((function(e){console.log(e)}))}else e.forEach((function(e){console.log("\ub611\uac19\uc740\uac8c \uc788\ub124\uc694?"+e.id,"=>",e.data())}))})).catch((function(e){e.response}))}))})).catch((function(e){e.response&&console.log(e.response.status)}))}))})).catch((function(e){console.log(e)}))}))}));var c=Object(o.useState)([]),r=Object(d.a)(c,2),i=r[0];r[1];return a.a.createElement("div",null,a.a.createElement("table",null,a.a.createElement("tbody",null,console.log("ax render"),i.reverse().map((function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,e.id),a.a.createElement("td",null,"datetime:",e.wr_2),a.a.createElement("td",null,x()(e.wr_2).format("h:mm:ss")),a.a.createElement("td",null,"wr_1:",e.wr_1))})))))}var D=function(e){var t=e.match,n=(e.history,t.params.id),o=Object(i.f)();return console.log(S.a.parse(o.search)),a.a.createElement("div",null,a.a.createElement("h3",null,"\uc778\ud130\ub137\ubc29\uc1a1"),a.a.createElement(i.a,{path:"".concat(t.path,"/:no"),component:m}),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(r.c,{to:"".concat(t.url,"/1")},"velopert")),a.a.createElement("li",null,a.a.createElement(r.c,{to:"".concat(t.url,"/2")},"gildong"),"link state\ub85c \ub118\uaca8\uc900 id \uac12\uc740 ",n)),a.a.createElement(i.a,{path:"/ib_new1",exact:!0,render:function(){return a.a.createElement("div",null,"\uc720\uc800\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")}}),a.a.createElement(j,{id:n}),window.location.search.substring(1))},B=function(){return a.a.createElement(r.b,null,a.a.createElement("div",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(r.c,{to:"/"},"\ud648")," "),a.a.createElement("li",null,a.a.createElement(r.c,{to:{pathname:"/board/ib_new1",id:"ib_new1"}},"\uc778\ud130\ub137\ubc29\uc1a1"))),a.a.createElement("hr",null),a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/",exact:!0,component:s})," ",a.a.createElement(i.a,{path:"/board/:id",component:D}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(r.a,null,a.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[189,1,2]]]);
//# sourceMappingURL=main.a558e5ac.chunk.js.map